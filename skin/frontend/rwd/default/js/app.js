var bp={xsmall:479,small:599,medium:770,large:979,xlarge:1199}
Varien.searchForm.prototype.initialize=function(form,field,emptyText){this.form=$(form);this.field=$(field);this.emptyText=emptyText;this.validator=new Validation(this.form);Event.observe(this.form,'submit',this.submit.bind(this));Event.observe(this.field,'focus',this.focus.bind(this));Event.observe(this.field,'blur',this.blur.bind(this));this.blur();}
Varien.searchForm.prototype.submit=function(event){if(!this.validator||!this.validator.validate()){Event.stop(event);return false;}return true;}
var $j=jQuery.noConflict();$j(document).ready(function(){var w=$j(window);var d=$j(document);var body=$j('body');var skipContents=$j('.skip-content');var skipLinks=$j('.skip-link');skipLinks.on('click',function(e){e.preventDefault();var self=$j(this);var target=self.attr('href');var elem=$j(target);var isSkipContentOpen=elem.hasClass('skip-active')?1:0;skipLinks.removeClass('skip-active');skipContents.removeClass('skip-active');if(isSkipContentOpen){self.removeClass('skip-active');}else{self.addClass('skip-active');elem.addClass('skip-active');}});$j('#header-cart').on('click','.skip-link-close',function(e){var parent=$j(this).parents('.skip-content');var link=parent.siblings('.skip-link');parent.removeClass('skip-active');link.removeClass('skip-active');e.preventDefault();});var nav=$j('#nav');var MenuManagerState={TOUCH_SCROLL_THRESHOLD:20,touchStartPosition:null,shouldCancelTouch:function(){if(!this.touchStartPosition){return false;}var scroll=$j(window).scrollTop()-this.touchStartPosition;return Math.abs(scroll)>this.TOUCH_SCROLL_THRESHOLD;}};var pointerEvent='touchend';if(window.navigator.pointerEnabled){pointerEvent='pointerdown';}else if(window.navigator.msPointerEnabled){pointerEvent='MSPointerDown';}nav.find('a.has-children.level0').on(pointerEvent,function(event){if(MenuManagerState.shouldCancelTouch()){return;}if(window.navigator.msPointerEnabled&&event.originalEvent.pointerType=='mouse'&&Modernizr.mq("screen and (min-width:"+(bp.medium+1)+"px)")){$j(this).data('has-touch',false);return;}$j(this).data('has-touch',true);var elem=$j(this).parent();var alreadyExpanded=elem.hasClass('menu-active');nav.find('li.level0').removeClass('menu-active');nav.find('.sub-menu-active').removeClass('sub-menu-active');if(!alreadyExpanded){elem.addClass('menu-active');}event.preventDefault();}).on('click',function(event){var elem=$j(this);if(elem.data('has-touch')){elem.data('has-touch',false);event.preventDefault();return;}if(Modernizr.mq("screen and (max-width:"+bp.medium+"px)")){var elem=$j(this).parent();var alreadyExpanded=elem.hasClass('menu-active');nav.find('li.level0').removeClass('menu-active');nav.find('.sub-menu-active').removeClass('sub-menu-active');if(!alreadyExpanded){elem.addClass('menu-active');}event.preventDefault();}}).on('touchstart',function(event){$j(this).data('has-touch');MenuManagerState.touchStartPosition=$j(window).scrollTop();});nav.find('li.level1 a.has-children').on('click',function(e){e.preventDefault();e.stopPropagation();var elem=$j(this).parent();var isSubMenuActive=elem.hasClass('sub-menu-active')?1:0;if(Modernizr.mq("screen and (min-width:"+(bp.medium+1)+"px)")){elem.siblings('.sub-menu-active').removeClass('sub-menu-active').find('.sub-menu-active').removeClass('sub-menu-active');}if(isSubMenuActive){elem.removeClass('sub-menu-active');}else{elem.addClass('sub-menu-active');}});function preventMenuSpill(){var windowWidth=$j(window).width();$j('ul.level0').each(function(){var ul=$j(this);ul.addClass('position-test');ul.removeClass('spill');var width=ul.outerWidth();var offset=ul.offset().left;ul.removeClass('position-test');if((offset+width)>windowWidth){ul.addClass('spill');}});}preventMenuSpill();$j(window).on('delayed-resize',preventMenuSpill);enquire.register('(max-width: '+bp.medium+'px)',{match:function(){$j('.page-header-container .store-language-container').prepend($j('.form-language'));},unmatch:function(){$j('.header-language-container .store-language-container').prepend($j('.form-language'));}});enquire.register('screen and (min-width: '+(bp.medium+1)+'px)',{match:function(){$j('.menu-active').removeClass('menu-active');$j('.sub-menu-active').removeClass('sub-menu-active');$j('.skip-active').removeClass('skip-active');},unmatch:function(){$j('.menu-active').removeClass('menu-active');$j('.sub-menu-active').removeClass('sub-menu-active');$j('.skip-active').removeClass('skip-active');}});var mediaListLinks=$j('.media-list').find('a');var mediaPrimaryImage=$j('.primary-image').find('img');if(mediaListLinks.length){mediaListLinks.on('click',function(e){e.preventDefault();var self=$j(this);mediaPrimaryImage.attr('src',self.attr('href'));});}jQuery.fn.toggleSingle=function(options){var settings=$j.extend({destruct:false},options);return this.each(function(){if(!settings.destruct){$j(this).on('click',function(){$j(this).toggleClass('active').next().toggleClass('no-display');});$j(this).next().addClass('no-display');}else{$j(this).off('click');$j(this).removeClass('active').next().removeClass('no-display');}});}
$j('.toggle-content').each(function(){var wrapper=jQuery(this);var hasTabs=wrapper.hasClass('tabs');var hasAccordion=wrapper.hasClass('accordion');var startOpen=wrapper.hasClass('open');var dl=wrapper.children('dl:first');var dts=dl.children('dt');var panes=dl.children('dd');var groups=new Array(dts,panes);if(hasTabs){var ul=jQuery('<ul class="toggle-tabs"></ul>');dts.each(function(){var dt=jQuery(this);var li=jQuery('<li></li>');li.html(dt.html());ul.append(li);});ul.insertBefore(dl);var lis=ul.children();groups.push(lis);}var i;for(i=0;i<groups.length;i++){groups[i].filter(':last').addClass('last');}function toggleClasses(clickedItem,group){var index=group.index(clickedItem);var i;for(i=0;i<groups.length;i++){groups[i].removeClass('current');groups[i].eq(index).addClass('current');}}dts.on('click',function(e){if(jQuery(this).hasClass('current')&&wrapper.hasClass('accordion-open')){wrapper.removeClass('accordion-open');}else{wrapper.addClass('accordion-open');}toggleClasses(jQuery(this),dts);});if(hasTabs){lis.on('click',function(e){toggleClasses(jQuery(this),lis);});lis.eq(0).trigger('click');}if(startOpen){dts.eq(0).trigger('click');}});if($j('.col-left-first > .block').length&&$j('.category-products').length){enquire.register('screen and (max-width: '+bp.medium+'px)',{match:function(){$j('.col-left-first').insertBefore($j('.category-products'))},unmatch:function(){$j('.col-left-first').insertBefore($j('.col-main'))}});}if($j('.main-container.col3-layout').length>0){enquire.register('screen and (max-width: 1000px)',{match:function(){var rightColumn=$j('.col-right');var colWrapper=$j('.col-wrapper');rightColumn.appendTo(colWrapper);},unmatch:function(){var rightColumn=$j('.col-right');var main=$j('.main');rightColumn.appendTo(main);}});}enquire.register('(max-width: '+bp.medium+'px)',{setup:function(){this.toggleElements=$j('.col-left-first .block:not(.block-layered-nav) .block-title, '+'.col-left-first .block-layered-nav .block-subtitle--filter, '+'.sidebar:not(.col-left-first) .block .block-title');},match:function(){this.toggleElements.toggleSingle();},unmatch:function(){this.toggleElements.toggleSingle({destruct:true});}});if($j('body.checkout-onepage-index').length){enquire.register('(max-width: '+bp.large+'px)',{match:function(){$j('#checkout-step-review').prepend($j('#checkout-progress-wrapper'));},unmatch:function(){$j('.col-right').prepend($j('#checkout-progress-wrapper'));}});}if($j('body.checkout-cart-index').length){$j('input[name^="cart"]').focus(function(){$j(this).siblings('button').fadeIn();});}if($j('.products-grid').length){var alignProductGridActions=function(){var gridRows=[];var tempRow=[];productGridElements=$j('.products-grid > li');productGridElements.each(function(index){if($j(this).css('clear')!='none'&&index!=0){gridRows.push(tempRow);tempRow=[];}tempRow.push(this);if(productGridElements.length==index+1){gridRows.push(tempRow);}});$j.each(gridRows,function(){var tallestHeight=0;$j.each(this,function(){$j(this).find('.product-info').css('min-height','');elHeight=parseInt($j(this).find('.product-info').css('height'));if(elHeight>tallestHeight){tallestHeight=elHeight;}});$j.each(this,function(){$j(this).find('.product-info').css('minHeight',tallestHeight);});});}
alignProductGridActions();$j(window).on('delayed-resize',function(e,resizeEvent){alignProductGridActions();});}var resizeTimer;$j(window).resize(function(e){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){$j(window).trigger('delayed-resize',e);},250);});});var ProductMediaManager={IMAGE_ZOOM_THRESHOLD:20,zoomEnabled:Modernizr.mq("screen and (min-width:768px)"),imageWrapper:null,destroyZoom:function(){$j('.zoomContainer').remove();$j('.product-image-gallery .gallery-image').removeData('elevateZoom');},createZoom:function(image){return;ProductMediaManager.destroyZoom();if(!ProductMediaManager.zoomEnabled){return;}if(image.length<=0){return;}if(image[0].naturalWidth&&image[0].naturalHeight){var widthDiff=image[0].naturalWidth-image.width()-ProductMediaManager.IMAGE_ZOOM_THRESHOLD;var heightDiff=image[0].naturalHeight-image.height()-ProductMediaManager.IMAGE_ZOOM_THRESHOLD;if(widthDiff<0&&heightDiff<0){image.parents('.product-image').removeClass('zoom-available');return;}else{image.parents('.product-image').addClass('zoom-available');}}image.elevateZoom();},swapImage:function(targetImage){targetImage=$j(targetImage);targetImage.addClass('gallery-image');ProductMediaManager.destroyZoom();var imageGallery=$j('.product-image-gallery');if(targetImage[0].complete){imageGallery.find('.gallery-image').removeClass('visible');imageGallery.append(targetImage);targetImage.addClass('visible');ProductMediaManager.createZoom(targetImage);}else{imageGallery.addClass('loading');imageGallery.append(targetImage);imagesLoaded(targetImage,function(){imageGallery.removeClass('loading');imageGallery.find('.gallery-image').removeClass('visible');targetImage.addClass('visible');ProductMediaManager.createZoom(targetImage);});}},wireThumbnails:function(){$j('.product-image-thumbs .thumb-link').click(function(e){e.preventDefault();var jlink=$j(this);var target=$j('#image-'+jlink.data('image-index'));ProductMediaManager.swapImage(target);});},initZoom:function(){ProductMediaManager.createZoom($j(".no-touch .gallery-image.visible"));},init:function(){ProductMediaManager.imageWrapper=$j('.product-img-box');enquire.register("screen and (min-width:768px)",{match:function(){ProductMediaManager.zoomEnabled=true;ProductMediaManager.initZoom();},unmatch:function(){ProductMediaManager.destroyZoom();ProductMediaManager.zoomEnabled=false;}});$j(window).on('delayed-resize',function(e,resizeEvent){ProductMediaManager.destroyZoom();ProductMediaManager.initZoom();});ProductMediaManager.wireThumbnails();$j(document).trigger('product-media-loaded',ProductMediaManager);}};$j(document).ready(function($){ProductMediaManager.init();var links=$('#nav a.level0');var activeLi=$('#nav li.level0.active');var lis=$('#nav li.level0');var $megamenus=$('div.mega-menu');var timeout=0;function hideMenu(){$megamenus.hide();lis.removeClass('active');activeLi.addClass('active');}links.on('mouseover',function(evt){window.clearTimeout(timeout);evt.stopPropagation();evt.preventDefault();var $this=$(this);var index=links.index($this);$megamenus.hide();lis.removeClass('active');$this.parent().addClass('active');$megamenus.eq(index).show();}).on('mouseout',function(){var $this=$(this);window.clearTimeout(timeout);timeout=setTimeout(function(){hideMenu();},300);});$megamenus.on('mouseenter',function(){window.clearTimeout(timeout);}).on('mouseleave',function(){hideMenu();}).click(function(evt){evt.stopPropagation();});$(document).click(function(){$megamenus.hide();});});